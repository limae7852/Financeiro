<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinControl - Sistema de Controle Financeiro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .transaction-income {
            border-left: 4px solid #10b981;
        }
        .transaction-expense {
            border-left: 4px solid #ef4444;
        }
        .chart-container {
            height: 300px;
        }
        @media (max-width: 768px) {
            .mobile-flex-col {
                flex-direction: column;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen">
        <div class="fixed inset-y-0 left-0 w-64 bg-white shadow-lg hidden md:block">
            <div class="flex items-center justify-center h-16 gradient-bg">
                <h1 class="text-white font-bold text-xl">FinControl</h1>
            </div>
            <nav class="mt-6">
                <a href="#" class="flex items-center px-6 py-3 text-gray-700 bg-gray-100 border-l-4 border-indigo-500">
                    <i class="fas fa-home mr-3"></i>
                    Dashboard
                </a>
                <a href="#" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i class="fas fa-exchange-alt mr-3"></i>
                    Transações
                </a>
                <a href="#" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i class="fas fa-piggy-bank mr-3"></i>
                    Contas Bancárias
                </a>
                <a href="#" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i class="fas fa-chart-pie mr-3"></i>
                    Relatórios
                </a>
                <a href="#" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i class="fas fa-tags mr-3"></i>
                    Categorias
                </a>
                <a href="#" class="flex items-center px-6 py-3 text-gray-600 hover:bg-gray-50">
                    <i class="fas fa-cog mr-3"></i>
                    Configurações
                </a>
            </nav>
        </div>

        <div class="md:hidden bg-white shadow">
            <div class="flex items-center justify-between px-4 py-3 gradient-bg">
                <h1 class="text-white font-bold text-lg">FinControl</h1>
                <button id="mobile-menu-button" class="text-white focus:outline-none">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
            <div id="mobile-menu" class="hidden bg-white shadow-lg">
                <nav class="flex flex-col">
                    <a href="#" class="px-4 py-3 text-gray-700 bg-gray-100">Dashboard</a>
                    <a href="#" class="px-4 py-3 text-gray-600 hover:bg-gray-50">Transações</a>
                    <a href="#" class="px-4 py-3 text-gray-600 hover:bg-gray-50">Contas Bancárias</a>
                    <a href="#" class="px-4 py-3 text-gray-600 hover:bg-gray-50">Relatórios</a>
                    <a href="#" class="px-4 py-3 text-gray-600 hover:bg-gray-50">Categorias</a>
                    <a href="#" class="px-4 py-3 text-gray-600 hover:bg-gray-50">Configurações</a>
                </nav>
            </div>
        </div>

        <div class="md:ml-64">
            <div class="bg-white shadow">
                <div class="flex items-center justify-between px-6 py-3">
                    <div class="flex items-center">
                        <h2 class="text-xl font-semibold text-gray-800">Dashboard</h2>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <button class="p-2 text-gray-600 rounded-full hover:bg-gray-100">
                                <i class="fas fa-bell"></i>
                            </button>
                            <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
                        </div>
                        <div class="relative">
                            <button class="flex items-center space-x-2 focus:outline-none">
                                <div class="w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center">
                                    <i class="fas fa-user text-indigo-600"></i>
                                </div>
                                <span class="text-gray-700">Usuário</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6 summary-cards-container">
                    <div class="bg-white rounded-lg shadow p-6 summary-total">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500">Saldo Total</p>
                                <h3 class="text-2xl font-bold text-gray-800" id="total-balance"></h3>
                            </div>
                            <div class="p-3 rounded-full bg-green-100 text-green-600">
                                <i class="fas fa-wallet text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <span class="text-green-500 text-sm font-semibold" id="total-balance-change"></span>
                            <span class="text-gray-500 text-sm ml-2">vs último mês</span>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6 summary-income">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500">Receitas</p>
                                <h3 class="text-2xl font-bold text-gray-800" id="total-income"></h3>
                            </div>
                            <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                                <i class="fas fa-arrow-up text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <span class="text-green-500 text-sm font-semibold" id="income-change"></span>
                            <span class="text-gray-500 text-sm ml-2">vs último mês</span>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6 summary-expense">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500">Despesas</p>
                                <h3 class="text-2xl font-bold text-gray-800" id="total-expense"></h3>
                            </div>
                            <div class="p-3 rounded-full bg-red-100 text-red-600">
                                <i class="fas fa-arrow-down text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <span class="text-red-500 text-sm font-semibold" id="expense-change"></span>
                            <span class="text-gray-500 text-sm ml-2">vs último mês</span>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6 summary-investments">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500">Investimentos</p>
                                <h3 class="text-2xl font-bold text-gray-800" id="total-investments"></h3>
                            </div>
                            <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                                <i class="fas fa-chart-line text-xl"></i>
                            </div>
                        </div>
                        <div class="mt-4">
                            <span class="text-green-500 text-sm font-semibold" id="investments-change"></span>
                            <span class="text-gray-500 text-sm ml-2">vs último mês</span>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                    <div class="bg-white rounded-lg shadow p-6 lg:col-span-2">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Despesas por Categoria</h3>
                            <select class="bg-gray-100 border border-gray-300 text-gray-700 py-1 px-3 rounded focus:outline-none">
                                <option>Últimos 30 dias</option>
                                <option>Últimos 3 meses</option>
                                <option>Este ano</option>
                            </select>
                        </div>
                        <div class="chart-container">
                            <canvas id="expenseChart"></canvas>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6 bank-connections">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Contas Bancárias</h3>
                            <button id="connect-bank-btn" class="bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700">
                                <i class="fas fa-plus mr-1"></i> Conectar
                            </button>
                        </div>
                        <div class="space-y-4" id="bank-accounts-container">
                             </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="bg-white rounded-lg shadow p-6 lg:col-span-2 recent-transactions">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Últimas Transações</h3>
                            <button class="text-indigo-600 text-sm font-medium hover:text-indigo-800">
                                Ver todas
                            </button>
                        </div>
                        <div class="space-y-4" id="transactions-container">
                            </div>
                        <div class="mt-4">
                            <button id="add-transaction-btn" class="w-full py-2 border border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-indigo-500 hover:text-indigo-500">
                                <i class="fas fa-plus mr-2"></i> Adicionar transação
                            </button>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-800">Orçamento Mensal</h3>
                            <button class="text-indigo-600 text-sm font-medium hover:text-indigo-800">
                                Configurar
                            </button>
                        </div>
                        <div class="monthly-budget" id="budgets-container">
                            </div>
                        <div class="mt-6">
                            <div class="flex justify-between items-center">
                                <span class="font-medium">Total gasto:</span>
                                <span class="text-red-500 font-medium" id="total-spent"></span>
                            </div>
                            <div class="flex justify-between items-center mt-2">
                                <span class="font-medium">Orçamento total:</span>
                                <span class="text-gray-700 font-medium" id="total-budget"></span>
                            </div>
                            <div class="flex justify-between items-center mt-2">
                                <span class="font-medium">Restante:</span>
                                <span class="text-green-500 font-medium" id="remaining-budget"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="bank-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                            <h3 class="text-lg leading-6 font-medium text-gray-900">Conectar Conta Bancária</h3>
                            <div class="mt-4">
                                <p class="text-sm text-gray-500">Selecione seu banco para conectar automaticamente suas transações:</p>
                                <div class="mt-4 grid grid-cols-3 gap-4">
                                    <button class="bank-btn p-3 border rounded-lg hover:border-indigo-500">
                                        <img src="https://logo.clearbit.com/banco.bradesco" alt="Bradesco" class="h-8 mx-auto">
                                    </button>
                                    <button class="bank-btn p-3 border rounded-lg hover:border-indigo-500">
                                        <img src="https://logo.clearbit.com/itau.com.br" alt="Itaú" class="h-8 mx-auto">
                                    </button>
                                    <button class="bank-btn p-3 border rounded-lg hover:border-indigo-500">
                                        <img src="https://logo.clearbit.com/bb.com.br" alt="Banco do Brasil" class="h-8 mx-auto">
                                    </button>
                                    <button class="bank-btn p-3 border rounded-lg hover:border-indigo-500">
                                        <img src="https://logo.clearbit.com/santander.com.br" alt="Santander" class="h-8 mx-auto">
                                    </button>
                                    <button class="bank-btn p-3 border rounded-lg hover:border-indigo-500">
                                        <img src="https://logo.clearbit.com/caixa.gov.br" alt="Caixa" class="h-8 mx-auto">
                                    </button>
                                    <button class="bank-btn p-3 border rounded-lg hover:border-indigo-500">
                                        <img src="https://logo.clearbit.com/nubank.com.br" alt="Nubank" class="h-8 mx-auto">
                                    </button>
                                </div>
                                <div class="mt-4">
                                    <p class="text-sm text-gray-500">Ou insira manualmente os dados da sua conta:</p>
                                    <div class="mt-2">
                                        <select class="w-full bg-gray-100 border border-gray-300 text-gray-700 py-2 px-3 rounded focus:outline-none">
                                            <option>Selecione o banco</option>
                                            <option>Banco do Brasil</option>
                                            <option>Bradesco</option>
                                            <option>Itaú</option>
                                            <option>Santander</option>
                                            <option>Caixa Econômica</option>
                                            <option>Nubank</option>
                                            <option>Outro</option>
                                        </select>
                                    </div>
                                    <div class="mt-2">
                                        <input type="text" placeholder="Agência" class="w-full bg-gray-100 border border-gray-300 text-gray-700 py-2 px-3 rounded focus:outline-none">
                                    </div>
                                    <div class="mt-2">
                                        <input type="text" placeholder="Conta" class="w-full bg-gray-100 border border-gray-300 text-gray-700 py-2 px-3 rounded focus:outline-none">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" id="confirm-connect" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm">
                        Conectar
                    </button>
                    <button type="button" id="cancel-connect" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Cancelar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Dados de exemplo (mock data) para simular um backend
        const dashboardData = {
            summary: {
                totalBalance: 12345.67,
                income: 8765.43,
                expense: 4321.09,
                investments: 23456.78
            },
            recentTransactions: [
                { description: 'Salário', amount: 8000.00, type: 'income', source: 'Empresa XYZ', date: '15/06/2023', icon: 'money-bill-wave' },
                { description: 'Supermercado', amount: 450.75, type: 'expense', source: 'Mercado ABC', date: '14/06/2023', icon: 'shopping-cart' },
                { description: 'Aluguel', amount: 2500.00, type: 'expense', source: 'Imobiliária', date: '10/06/2023', icon: 'home' },
                { description: 'Freelance', amount: 1200.00, type: 'income', source: 'Cliente B', date: '08/06/2023', icon: 'hand-holding-usd' },
            ],
            monthlyBudgets: [
                { category: 'Alimentação', spent: 450.75, limit: 600.00, color: '#f59e0b' },
                { category: 'Transporte', spent: 320.50, limit: 400.00, color: '#3b82f6' },
                { category: 'Lazer', spent: 180.00, limit: 300.00, color: '#8b5cf6' },
                { category: 'Moradia', spent: 2500.00, limit: 2500.00, color: '#ef4444' }
            ],
            bankAccounts: [
                { bank: 'Banco do Brasil', account: 'Conta Corrente •••• 3456', balance: 5432.10, icon: 'university', color: 'blue' },
                { bank: 'Nubank', account: 'Cartão de Crédito •••• 7890', balance: -1234.56, icon: 'credit-card', color: 'purple' },
                { bank: 'Itaú', account: 'Conta Poupança •••• 1234', balance: 7890.12, icon: 'university', color: 'green' },
            ]
        };

        // Função para formatar valores para o formato R$
        const formatCurrency = (value) => {
            const formattedValue = new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL'
            }).format(value);
            return formattedValue;
        };

        // Função para renderizar os dados do dashboard
        function renderDashboard() {
            // Cards de resumo
            document.getElementById('total-balance').textContent = formatCurrency(dashboardData.summary.totalBalance);
            document.getElementById('total-income').textContent = formatCurrency(dashboardData.summary.income);
            document.getElementById('total-expense').textContent = formatCurrency(dashboardData.summary.expense);
            document.getElementById('total-investments').textContent = formatCurrency(dashboardData.summary.investments);
            
            // Simular mudanças percentuais
            document.getElementById('total-balance-change').textContent = "+2.5%";
            document.getElementById('income-change').textContent = "+12%";
            document.getElementById('expense-change').textContent = "-5%";
            document.getElementById('investments-change').textContent = "+8.3%";

            // Transações recentes
            const transactionsContainer = document.getElementById('transactions-container');
            transactionsContainer.innerHTML = '';
            dashboardData.recentTransactions.forEach(transaction => {
                const div = document.createElement('div');
                div.className = `flex items-center justify-between p-3 bg-white rounded-lg transaction-${transaction.type}`;
                div.innerHTML = `
                    <div class="flex items-center">
                        <div class="p-2 rounded-full bg-${transaction.type === 'income' ? 'green' : 'red'}-100 text-${transaction.type === 'income' ? 'green' : 'red'}-600 mr-3">
                            <i class="fas fa-${transaction.icon}"></i>
                        </div>
                        <div>
                            <h4 class="font-medium">${transaction.description}</h4>
                            <p class="text-gray-500 text-sm">${transaction.source} • ${transaction.date}</p>
                        </div>
                    </div>
                    <span class="text-${transaction.type === 'income' ? 'green' : 'red'}-500 font-medium">${transaction.type === 'income' ? '+' : '-'}${formatCurrency(transaction.amount)}</span>
                `;
                transactionsContainer.appendChild(div);
            });

            // Orçamento
            const budgetsContainer = document.getElementById('budgets-container');
            budgetsContainer.innerHTML = '';
            let totalSpent = 0;
            let totalBudget = 0;
            dashboardData.monthlyBudgets.forEach(budget => {
                totalSpent += budget.spent;
                totalBudget += budget.limit;
                const div = document.createElement('div');
                div.className = 'mb-4';
                const percentage = (budget.spent / budget.limit) * 100;
                div.innerHTML = `
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium">${budget.category}</span>
                        <span class="text-sm text-gray-500">${formatCurrency(budget.spent)} / ${formatCurrency(budget.limit)}</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="h-2 rounded-full" style="width: ${percentage}%; background-color: ${budget.color}"></div>
                    </div>
                `;
                budgetsContainer.appendChild(div);
            });
            document.getElementById('total-spent').textContent = formatCurrency(totalSpent);
            document.getElementById('total-budget').textContent = formatCurrency(totalBudget);
            document.getElementById('remaining-budget').textContent = formatCurrency(totalBudget - totalSpent);

            // Contas Bancárias
            const bankAccountsContainer = document.getElementById('bank-accounts-container');
            bankAccountsContainer.innerHTML = '';
            dashboardData.bankAccounts.forEach(account => {
                const div = document.createElement('div');
                div.className = 'flex items-center p-3 border rounded-lg';
                div.innerHTML = `
                    <div class="p-2 rounded-full bg-${account.color}-100 text-${account.color}-600 mr-3">
                        <i class="fas fa-${account.icon}"></i>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-medium">${account.bank}</h4>
                        <p class="text-gray-500 text-sm">${account.account}</p>
                    </div>
                    <span class="text-${account.balance >= 0 ? 'green' : 'red'}-500 font-medium">${formatCurrency(account.balance)}</span>
                `;
                bankAccountsContainer.appendChild(div);
            });
        }

        // Lógica da UI
        document.addEventListener('DOMContentLoaded', function() {
            renderDashboard();

            // Mobile menu toggle
            document.getElementById('mobile-menu-button').addEventListener('click', function() {
                const menu = document.getElementById('mobile-menu');
                menu.classList.toggle('hidden');
            });

            // Bank connection modal
            const connectBtn = document.getElementById('connect-bank-btn');
            const bankModal = document.getElementById('bank-modal');
            const cancelConnect = document.getElementById('cancel-connect');
            const confirmConnect = document.getElementById('confirm-connect');

            connectBtn.addEventListener('click', function() {
                bankModal.classList.remove('hidden');
            });

            cancelConnect.addEventListener('click', function() {
                bankModal.classList.add('hidden');
            });

            confirmConnect.addEventListener('click', function() {
                bankModal.classList.add('hidden');
                alert('Conta bancária conectada com sucesso!');
            });

            // Adicionar nova transação (simulada)
            document.getElementById('add-transaction-btn').addEventListener('click', function() {
                const newTransaction = {
                    description: 'Nova Despesa',
                    amount: 75.50,
                    type: 'expense',
                    source: 'Lojinha da esquina',
                    date: new Date().toLocaleDateString('pt-BR'),
                    icon: 'shopping-bag'
                };
                dashboardData.recentTransactions.unshift(newTransaction);
                // Atualiza o resumo
                dashboardData.summary.expense += newTransaction.amount;
                dashboardData.summary.totalBalance -= newTransaction.amount;
                renderDashboard();
                updateChart();
                alert('Transação adicionada com sucesso!');
            });

            // Chart.js implementation
            let expenseChart;
            const updateChart = () => {
                if (expenseChart) {
                    expenseChart.destroy();
                }

                const chartData = dashboardData.monthlyBudgets.map(b => b.spent);
                const chartLabels = dashboardData.monthlyBudgets.map(b => b.category);
                const chartColors = dashboardData.monthlyBudgets.map(b => b.color);

                const ctx = document.getElementById('expenseChart').getContext('2d');
                expenseChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: chartLabels,
                        datasets: [{
                            data: chartData,
                            backgroundColor: chartColors,
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        label += formatCurrency(context.raw);
                                        return label;
                                    }
                                }
                            }
                        },
                        cutout: '70%'
                    }
                });
            };

            updateChart();

            // Simulate bank selection
            const bankButtons = document.querySelectorAll('.bank-btn');
            bankButtons.forEach(button => {
                button.addEventListener('click', function() {
                    bankButtons.forEach(btn => btn.classList.remove('border-indigo-500', 'bg-indigo-50'));
                    this.classList.add('border-indigo-500', 'bg-indigo-50');
                });
            });
        });
    </script>
</body>
</html>
